<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">


    <changeSet id="hospital-core:2020-07-21-15:33" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance` (
            `ambulance_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`ambulance_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:38" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_driver table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_driver` (
            `driver_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `address` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `phone` varchar(20) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`driver_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:43" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_receipt table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_receipt` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `paid_date` datetime DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=315 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:47" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance_bill table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance_bill` (
            `ambulance__bill_id` int(11) NOT NULL AUTO_INCREMENT,
            `description` varchar(255) DEFAULT NULL,
            `creator` int(11) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `printed` bit(1) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `voided` bit(1) DEFAULT NULL,
            `voided_date` datetime DEFAULT NULL,
            `driver_id` int(11) DEFAULT NULL,
            `receipt_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`ambulance__bill_id`),
            KEY `fk_ambulancebill_driver` (`driver_id`),
            KEY `fk_ambulancebill_user` (`creator`),
            KEY `fk_ambulance_receipt` (`receipt_id`),
            CONSTRAINT `fk_ambulancebill_driver` FOREIGN KEY (`driver_id`) REFERENCES `billing_driver` (`driver_id`),
            CONSTRAINT `fk_ambulancebill_user` FOREIGN KEY (`creator`) REFERENCES `users` (`user_id`),
            CONSTRAINT `fk_ambulance_receipt` FOREIGN KEY (`receipt_id`) REFERENCES `billing_receipt` (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-15:51" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance_bill_item table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance_bill_item` (
            `ambulance__bill_item_id` int(11) NOT NULL AUTO_INCREMENT,
            `ambulance_id` int(11) DEFAULT NULL,
            `ambulance_bill_id` int(11) DEFAULT NULL,
            `number_of_trip` int(11) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `name` varchar(255) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `voided` bit(1) DEFAULT NULL,
            `voided_date` datetime DEFAULT NULL,
            `patient_name` varchar(50) DEFAULT NULL,
            `receipt_number` varchar(13) DEFAULT NULL,
            `origin` varchar(20) DEFAULT NULL,
            `destination` varchar(20) DEFAULT NULL,
            PRIMARY KEY (`ambulance__bill_item_id`),
            KEY `fk_ambulancebillitem_ambulancebill` (`ambulance_bill_id`),
            KEY `fk_ambulancebillitem_ambulance` (`ambulance_id`),
            CONSTRAINT `fk_ambulancebillitem_ambulance` FOREIGN KEY (`ambulance_id`) REFERENCES `billing_ambulance` (`ambulance_id`),
            CONSTRAINT `fk_ambulancebillitem_ambulancebill` FOREIGN KEY (`ambulance_bill_id`) REFERENCES `billing_ambulance_bill` (`ambulance__bill_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:59" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the answer table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `answer` (
            `answer_id` int(11) NOT NULL AUTO_INCREMENT,
            `question_id` int(11) DEFAULT NULL,
            `answer_concept` int(11) DEFAULT NULL,
            `free_text` varchar(50) DEFAULT NULL,
            PRIMARY KEY (`answer_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:05" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_billable_service table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS  `billing_billable_service` (
            `service_id` int(11) NOT NULL AUTO_INCREMENT,
            `concept_id` int(11) DEFAULT NULL,
            `name` varchar(255) DEFAULT NULL,
            `short_name` varchar(255) DEFAULT NULL,
            `price` decimal(19,2) DEFAULT NULL,
            `disable` bit(1) DEFAULT NULL,
            `category` int(11) DEFAULT NULL,
            PRIMARY KEY (`service_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=479 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:06" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_receipt table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_receipt` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `paid_date` datetime DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=315 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:11" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_company table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_company` (
            `company_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `address` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `phone` varchar(20) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`company_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:15" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the core_form table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `core_form` (
            `core_form_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(120) DEFAULT NULL,
            `description` varchar(300) NOT NULL DEFAULT '',
            `content` varchar(20480) NOT NULL DEFAULT '',
            `created_on` datetime DEFAULT NULL,
            `created_by` int(11) DEFAULT NULL,
            `after_submit` varchar(300) DEFAULT NULL,
            PRIMARY KEY (`core_form_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:20" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table department</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `department` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-16:48" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table department_concept</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `department_concept` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `department_id` int(11) DEFAULT NULL,
            `concept_id` int(11) DEFAULT NULL,
            `type_concept` int(11) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=161 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-16:53" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table dms_opdunit</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `dms_opdunit` (
            `unit_id` int(11) NOT NULL AUTO_INCREMENT,
            `unit_no` int(11) DEFAULT NULL,
            `opd_concept_id` int(11) DEFAULT NULL,
            `opd_day` int(11) DEFAULT NULL,
            `start_time` datetime DEFAULT NULL,
            `end_time` datetime DEFAULT NULL,
            `active_date` datetime DEFAULT NULL,
            `deactive_date` datetime DEFAULT NULL,
            `creator` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=161 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-17:03" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table billing_driver</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_driver` (
            `driver_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `address` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `phone` varchar(20) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`driver_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-17:06" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table examination</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `examination` (
            `exam_id` int(11) NOT NULL AUTO_INCREMENT,
            `encounter` int(11) DEFAULT NULL,
            `exam_concept` int(11) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `creator` int(11) DEFAULT NULL,
            PRIMARY KEY (`exam_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=1051 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-17:16" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table indoor_patient_service_bill</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `indoor_patient_service_bill` (
            `indoor_patient_service_bill_id` int(11) NOT NULL AUTO_INCREMENT,
            `creator` int(11) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `patient_id` int(11) DEFAULT NULL,
            `actual_amount` decimal(19,2) DEFAULT NULL,
            `encounter_id` int(11) DEFAULT NULL,
            `selected_category` int(11) DEFAULT '0',
            `comment` varchar(225) DEFAULT NULL,
            `waiver_amount` decimal(19,2) DEFAULT NULL,
            `payment_mode` varchar(50) DEFAULT NULL,
            PRIMARY KEY (`indoor_patient_service_bill_id`),
            KEY `fk_indoorpatientservicebill_patient` (`patient_id`),
            KEY `fk_indoorpatientservicebill_user` (`creator`),
            KEY `fk_indoorpatientservicebill_encounter` (`encounter_id`),
            CONSTRAINT `fk_indoorpatientservicebill_encounter` FOREIGN KEY (`encounter_id`) REFERENCES `encounter` (`encounter_id`),
            CONSTRAINT `fk_indoorpatientservicebill_patient` FOREIGN KEY (`patient_id`) REFERENCES `patient` (`patient_id`),
            CONSTRAINT `fk_indoorpatientservicebill_user` FOREIGN KEY (`creator`) REFERENCES `users` (`user_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=214 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-17:17" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table indoor_patient_service_bill_item</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `indoor_patient_service_bill_item` (
            `indoor_patient_service_bill_item_id` int(11) NOT NULL AUTO_INCREMENT,
            `service_id` int(11) DEFAULT NULL,
            `indoor_patient_service_bill_id` int(11) DEFAULT NULL,
            `unitPrice` decimal(19,2) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `quantity` int(11) DEFAULT NULL,
            `name` varchar(255) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `order_id` int(11) DEFAULT NULL,
            `actual_amount` decimal(19,2) DEFAULT NULL,
            `order_type` varchar(50) DEFAULT NULL,
            `voided` bit(1) DEFAULT NULL,
            `voided_date` datetime DEFAULT NULL,
            `voided_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`indoor_patient_service_bill_item_id`),
            KEY `fk_indoorpatientservicebillitem_billableservice` (`service_id`),
            KEY `fk_indoorpatientservicebillitem_patientservicebill` (`indoor_patient_service_bill_id`),
            KEY `fk_indoorpatientservicebillitem_order` (`order_id`),
            CONSTRAINT `fk_indoorpatientservicebillitem_billableservice` FOREIGN KEY (`service_id`) REFERENCES `billing_billable_service` (`service_id`),
            CONSTRAINT `fk_indoorpatientservicebillitem_order` FOREIGN KEY (`order_id`) REFERENCES `orders` (`order_id`),
            CONSTRAINT `fk_indoorpatientservicebillitem_patientservicebill` FOREIGN KEY (`indoor_patient_service_bill_id`) REFERENCES `indoor_patient_service_bill` (`indoor_patient_service_bill_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=368 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-17:24" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table inventory_drug</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `inventory_drug` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `unit_id` int(11) DEFAULT NULL,
            `category_id` int(11) DEFAULT NULL,
            `drug_id` int(11) DEFAULT NULL,
            `attribute` int(11) DEFAULT NULL,
            `consumption` int(11) DEFAULT NULL,
            `reorder_qty` int(11) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=357 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-17:25" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table inventory_drug_category</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `inventory_drug_category` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `description` varchar(500) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=74 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-17:27" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table inventory_drug_formulation</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `inventory_drug_formulation` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `dozage` varchar(255) DEFAULT NULL,
            `description` varchar(500) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=622 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-17:30" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>Add table inventory_drug_unit</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `inventory_drug_unit` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `description` varchar(500) DEFAULT NULL,
            `created_on` datetime DEFAULT NULL,
            `created_by` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
</databaseChangeLog>
